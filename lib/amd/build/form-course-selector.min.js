define(["core/ajax","jquery"],function(a,b){return{processResults:function(a,c){var d=[],e=0,f=b(a).data("exclude").split(",");for(e=0;e<c.courses.length;e++)-1===f.indexOf(c.courses[e].id)&&d.push({value:c.courses[e].id,label:c.courses[e].fullname});return d},transport:function(c,d,e,f){var g=b(c).data("requiredcapabilities");g=""!==g.trim()?g.split(","):[];var h={criterianame:"search",criteriavalue:d,page:0,perpage:100,requiredcapabilities:g},i=a.call([{methodname:"core_course_search_courses",args:h}]);return i[0].done(e),i[0].fail(f),i}}});
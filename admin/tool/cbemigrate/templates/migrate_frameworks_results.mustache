{{!
    This file is part of Moodle - http://moodle.org/

    Moodle is free software: you can redistribute it and/or modify
    it under the terms of the GNU General Public License as published by
    the Free Software Foundation, either version 3 of the License, or
    (at your option) any later version.

    Moodle is distributed in the hope that it will be useful,
    but WITHOUT ANY WARRANTY; without even the implied warranty of
    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
    GNU General Public License for more details.

    You should have received a copy of the GNU General Public License
    along with Moodle.  If not, see <http://www.gnu.org/licenses/>.
}}
{{!
    Migrate frameworks results template.
}}

<div data-region="migration-results">
    <h3>{{#str}}results, tool_cbemigrate{{/str}}</h3>
    <dl>
        <dt>{{#str}}coursesfound, tool_cbemigrate{{/str}}</dt>
        <dd>{{coursesfound}}</dd>
        <dt>{{#str}}coursemodulesfound, tool_cbemigrate{{/str}}</dt>
        <dd>{{cmsfound}}</dd>
        <dt>{{#str}}coursecompetencymigrations, tool_cbemigrate{{/str}}</dt>
        <dd>+{{ccmigrationscount}} -{{ccremovalscount}}</dd>
        <dt>{{#str}}coursemodulecompetencymigrations, tool_cbemigrate{{/str}}</dt>
        <dd>+{{mcmigrationscount}} -{{mcremovalscount}}</dd>
        <dt>{{#str}}missingmappings, tool_cbemigrate{{/str}}</dt>
        <dd>{{mappingsmissingcount}}</dd>
        <dt>{{#str}}warnings, tool_cbemigrate{{/str}}</dt>
        <dd>{{warningcount}}</dd>
        <dt>{{#str}}errors, tool_cbemigrate{{/str}}</dt>
        <dd>{{errorcount}}</dd>
    </dl>

    {{#hasunmappedfrom}}
    <h4>{{#str}}unmappedin, tool_cbemigrate, {{frameworkfrom.shortname}}{{/str}}</h4>
    <ul>
        {{#unmappedfrom}}
            <li><a href="#" data-id="{{id}}" data-action="competency-dialogue">{{shortname}}</a> <em>{{idnumber}}</em></li>
        {{/unmappedfrom}}
    </ul>
    {{/hasunmappedfrom}}

    {{#hasunmappedto}}
    <h4>{{#str}}unmappedin, tool_cbemigrate, {{frameworkto.shortname}}{{/str}}</h4>
    <ul>
        {{#unmappedto}}
            <li><a href="#" data-id="{{id}}" data-action="competency-dialogue">{{shortname}}</a> <em>{{idnumber}}</em></li>
        {{/unmappedto}}
    </ul>
    {{/hasunmappedto}}

    {{#warningcount}}
    <h4>{{#str}}warnings, tool_cbemigrate{{/str}}</h4>
    <ul>
        {{#warnings}}
            <li>
                <p>
                    {{message}}<br>
                    <small>{{course}} {{#cm}} &gt; {{cm}} {{/cm}} &gt; <a href="#" data-id="{{competencyid}}" data-action="competency-dialogue">{{competency}}</a></small>
                </p>
            </li>
        {{/warnings}}
    </ul>
    {{/warningcount}}

    {{#errorcount}}
    <h4>{{#str}}errors, tool_cbemigrate{{/str}}</h4>
    <ul>
        {{#errors}}
            <li>
                <p>
                    {{message}}<br>
                    <small>{{course}} {{#cm}} &gt; {{cm}} {{/cm}} &gt; <a href="#" data-id="{{competencyid}}" data-action="competency-dialogue">{{competency}}</a></small>
                </p>
            </li>
        {{/errors}}
    </ul>
    {{/errorcount}}
</div>
{{#js}}
require(['tool_lp/competencydialogue'], function(CompDialogue) {
    var cd = new CompDialogue({includecourses: true, includerelated: true});
    cd.watch('[data-region="migration-results"]');
})
{{/js}}
